{"version":3,"sources":["../src/parse.js"],"names":["parseContent","extendWithSource","link","source","line","column","url","placeholder","index","content","args","parse","contentLink","scopeReferences","map","ref","descendantReferences"],"mappings":";;;;;QAUgBA,Y,GAAAA,Y;;AAVhB;;;;AACA;;;;AAEA,SAASC,gBAAT,CAA0BC,IAA1B,EAAgCC,MAAhC,EAAwCC,IAAxC,EAA8CC,MAA9C,EAAsD;AACpD,MAAMC,MAAMJ,KAAKI,GAAjB;AACA,MAAMC,cAAcL,KAAKK,WAAzB;AACA,SAAO,EAAED,QAAF,EAAOC,wBAAP,EAAoBJ,cAApB,EAA4BC,UAA5B,EAAkCC,QAAQA,SAASH,KAAKM,KAAxD,EAAP;AACD;;AAED;AACO,SAASR,YAAT,CAAsBS,OAAtB,QAAyD;AAAA,MAAxBN,MAAwB,QAAxBA,MAAwB;AAAA,MAAhBC,IAAgB,QAAhBA,IAAgB;AAAA,MAAVC,MAAU,QAAVA,MAAU;;AAC9D,MAAMK,OAAO,iBAAQC,KAAR,CAAcF,OAAd,CAAb;;AAEA;AACA,MAAMG,cAAcX,iBAAiBS,KAAKR,IAAtB,EAA4BC,MAA5B,EAAoCC,IAApC,EAA0CC,MAA1C,CAApB;AACA,MAAMQ,kBAAkB,iBAAEC,GAAF,CAAMJ,KAAKG,eAAX,EAA4B;AAAA,WAAOZ,iBAAiBc,GAAjB,EAAsBZ,MAAtB,EAA8BC,IAA9B,EAAoCC,MAApC,CAAP;AAAA,GAA5B,CAAxB;AACA,MAAMW,uBAAuB,iBAAEF,GAAF,CAAMJ,KAAKM,oBAAX,EAAiC;AAAA,WAAOf,iBAAiBc,GAAjB,EAAsBZ,MAAtB,EAA8BC,IAA9B,EAAoCC,MAApC,CAAP;AAAA,GAAjC,CAA7B;;AAEA,SAAO,EAAEO,wBAAF,EAAeC,gCAAf,EAAgCG,0CAAhC,EAAP;AACD","file":"parse.js","sourcesContent":["import _ from 'lodash';\nimport { grammar } from './grammar';\n\nfunction extendWithSource(link, source, line, column) {\n  const url = link.url;\n  const placeholder = link.placeholder;\n  return { url, placeholder, source, line, column: column + link.index };\n}\n\n// eslint-disable-next-line import/prefer-default-export\nexport function parseContent(content, { source, line, column }) {\n  const args = grammar.parse(content);\n\n  // Attach source information to all the url to be resolved\n  const contentLink = extendWithSource(args.link, source, line, column);\n  const scopeReferences = _.map(args.scopeReferences, ref => extendWithSource(ref, source, line, column));\n  const descendantReferences = _.map(args.descendantReferences, ref => extendWithSource(ref, source, line, column));\n\n  return { contentLink, scopeReferences, descendantReferences };\n}\n"]}